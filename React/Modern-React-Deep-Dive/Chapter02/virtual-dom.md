# Virtual Dom (가상 DOM)

## DOM

DOM은 웹페이지에 대한 인터페이스로 브라우저가 웹페이지의 콘텐츠와 구조를 어떻게 보여줄지에 대한 정보를 담는다.

## 브라우저의 렌더링 과정

1. 브라우저가 사용자가 요청한 주소의 HTML을 받는다.

2. HTML을 파싱해 DOM 트리를 만든다.

3. 2번 과정에서 CSS가 존재할 시 다운받아 CSSOM도 만든다.

4. 가시적인 DOM 노드를 순회한다. (`display: none` 같은 경우는 제외함)

5. 가시적인 노드에 대한 CSSOM 정보를 찾고 노드에 적용한다.

- 레이아웃(리플로우): 좌표에 대한 기하학적인 계산.
- 페인팅(리페인팅): 색상 같은 유효한 모습을 그리는 과정.

## 가상 DOM 탄생 배경

실제 웹페이지 렌더링에는 많은 비용이 든다. 추가적으로 인터랙션이 적용되면 그 비용은 더욱 증가한다. 페인트의 경우 비용이 비교적 빠르게 처리되지만, 레이아웃의 경우 더 많은 비용이 일어난다. 이러한 작업은 SPA에서 필연적으로 더욱 많아진다.

이러한 이유로 가상의 DOM을 메모리에 저장하고 변경에 대한 계산을 메모리에서 실행한 후 준비가 완료되었을 때 수정 사항만 반영하는 것을 가상 DOM이라고 한다. 물론 가상 DOM은 항상 브라우저의 DOM보다 빠른 것은 아니지만, 대부분의 상황에서 애플리케이션을 만들 수 있을 정도로 충분히 빠르다. 가상 DOM은 실제 렌더링 과정을 거치지 않고 객체를 통해 메모리에서 연산되어 높은 효율을 보여준다.
